@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-gray-50 text-dark-grey font-sans;
    font-family: theme('fontFamily.sans');
  }
  
  html, body {
    @apply max-w-full overflow-x-hidden;
  }
}

@layer components {
  /* Container */
  .container {
    @apply max-w-4xl mx-auto px-4;
  }

  /* Typography */
  h1 {
    @apply text-center mt-0 text-dark-grey text-2xl;
  }

  p {
    @apply mb-4 text-center text-sm;
  }

  label {
    @apply font-bold text-sm mb-1;
  }

  /* Form elements */
  input[type="text"],
  input[type="email"],
  input[type="password"] {
    @apply p-3 text-base border border-light-grey w-full bg-white;
  }

  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="password"]:focus,
  select:focus {
    @apply outline-none border-teal shadow-[0_0_0_2px_theme(colors.teal.light)];
  }

  button {
    @apply inline-flex items-center justify-center px-4 py-2 text-sm border-none bg-teal text-white cursor-pointer transition-all duration-300 w-32 m-0 shadow-card;
  }

  button:hover {
    @apply bg-teal/80;
  }

  button:disabled {
    @apply bg-light-grey cursor-not-allowed;
  }

  select {
    @apply px-2 py-1.5 text-sm border border-light-grey min-w-[120px] bg-white;
  }

  /* Form groups */
  .form-group,
  .form-field {
    @apply flex flex-col gap-1.5 w-full min-w-0 max-w-full;
  }

  .form-field {
    @apply mb-4;
  }

  .form-group label,
  .form-field label {
    @apply text-sm font-semibold text-dark-grey;
  }

  .form-group input,
  .form-group select,
  .form-field input {
    @apply p-3 text-sm border border-light-grey;
  }

  .form-group input:focus,
  .form-field input:focus {
    @apply outline-none border-teal shadow-[0_0_0_2px_theme(colors.teal.light)];
  }

  /* Messages */
  .messages {
    @apply text-center min-h-[1.2em] text-red-700 mt-2 mb-2.5 p-2 transition-all duration-300 text-sm;
  }

  .messages.error {
    @apply bg-red-50 text-red-700 border border-red-200;
  }

  .messages.success {
    @apply bg-green-50 text-green-700 border border-green-200;
  }

  .messages.info {
    @apply bg-blue-50 text-blue-700 border border-blue-200;
  }

  /* Auth pages */
  .auth-wrapper {
    @apply min-h-screen flex items-center justify-center p-10 px-4;
  }

  .auth-card {
    @apply w-full max-w-md bg-white border border-light-grey shadow-card p-8 px-7;
  }

  .auth-title {
    @apply m-0 mb-2 text-center text-dark-grey;
  }

  .auth-subtitle {
    @apply m-0 mb-6 text-center text-light-grey text-sm;
  }

  .auth-form {
    @apply mb-0;
  }

  .auth-footer {
    @apply mt-6 text-center text-sm;
  }

  .auth-footer a {
    @apply text-teal no-underline font-medium;
  }

  .auth-footer a:hover {
    @apply underline;
  }

  /* Mobile header */
  .mobile-header {
    @apply flex justify-between items-center p-3 px-4 bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-40;
  }

  .mobile-brand {
    @apply flex items-center gap-3;
  }

  .mobile-brand-logo {
    @apply w-8 h-8 object-contain;
  }

  .mobile-brand-text {
    @apply font-bold text-base text-dark-grey;
  }

  .hamburger {
    @apply w-8 h-8 flex flex-col justify-center gap-1.5 bg-transparent border-none cursor-pointer p-0;
  }

  .hamburger span {
    @apply block w-full h-0.5 bg-dark-grey transition-all duration-300;
  }

  .hamburger.active span:nth-child(1) {
    @apply rotate-45 translate-y-2;
  }

  .hamburger.active span:nth-child(2) {
    @apply opacity-0;
  }

  .hamburger.active span:nth-child(3) {
    @apply -rotate-45 -translate-y-2;
  }

  /* Mobile overlay */
  .mobile-overlay {
    @apply fixed inset-0 bg-black/50 opacity-0 pointer-events-none transition-opacity duration-300 z-40;
  }

  .mobile-overlay.active {
    @apply opacity-100 pointer-events-auto;
  }

  /* Mobile menu */
  .mobile-menu {
    @apply fixed top-0 left-0 h-full w-72 bg-dark-grey -translate-x-full transition-transform duration-300 z-50 flex flex-col;
  }

  .mobile-menu.active {
    @apply translate-x-0;
  }

  .mobile-menu-header {
    @apply flex justify-between items-center p-4 border-b border-gray-600;
  }

  .mobile-menu-brand {
    @apply flex items-center gap-3;
  }

  .mobile-menu-brand-logo {
    @apply w-8 h-8 object-contain brightness-0 invert;
  }

  .mobile-menu-brand-text {
    @apply font-bold text-base text-white;
  }

  .mobile-menu-close {
    @apply bg-transparent border-none text-white text-2xl cursor-pointer p-0 w-6 h-6 flex items-center justify-center;
  }

  .mobile-menu-nav {
    @apply flex-1 overflow-y-auto py-4;
  }

  .mobile-menu-link {
    @apply flex items-center gap-4 px-4 py-3 text-white no-underline transition-all duration-200;
  }

  .mobile-menu-link:hover {
    @apply bg-gray-700;
  }

  .mobile-menu-link.active {
    @apply bg-gray-700 border-l-4 border-teal;
  }

  .mobile-menu-icon {
    @apply text-xl opacity-40;
  }

  .mobile-menu-link.active .mobile-menu-icon {
    @apply opacity-100 text-teal;
  }

  .mobile-menu-label {
    @apply text-sm font-medium;
  }

  /* Sidebar */
  .sidebar {
    @apply hidden bg-dark-grey text-white h-screen sticky top-0 flex-shrink-0 flex flex-col transition-all duration-300;
    width: 280px;
  }

  .sidebar.collapsed {
    width: 84px;
  }

  .sidebar-header {
    @apply p-4 border-b border-gray-600 flex items-center justify-between;
  }

  .sidebar-brand {
    @apply flex items-center gap-3;
  }

  .sidebar-logo {
    @apply w-8 h-8 object-contain brightness-0 invert;
  }

  .sidebar-brand-text {
    @apply font-bold text-base overflow-hidden whitespace-nowrap transition-opacity duration-300;
  }

  .sidebar.collapsed .sidebar-brand-text {
    @apply opacity-0 w-0;
  }

  .sidebar-toggle {
    @apply bg-transparent border-none text-white text-xl cursor-pointer p-1 flex items-center justify-center;
  }

  .sidebar-nav {
    @apply flex-1 overflow-y-auto py-2;
  }

  .sidebar-link {
    @apply flex items-center gap-4 px-4 py-3 text-white no-underline transition-all duration-200;
  }

  .sidebar-link:hover {
    @apply bg-gray-700;
  }

  .sidebar-link.active {
    @apply bg-gray-700 border-l-4 border-teal;
  }

  .sidebar-icon {
    @apply text-xl opacity-40 flex-shrink-0;
  }

  .sidebar-link.active .sidebar-icon {
    @apply opacity-100 text-teal;
  }

  .sidebar-label {
    @apply text-sm font-medium overflow-hidden whitespace-nowrap transition-opacity duration-300;
  }

  .sidebar.collapsed .sidebar-label {
    @apply opacity-0 w-0;
  }

  /* App layout */
  .app {
    @apply grid min-h-screen gap-0;
    grid-template-columns: 1fr;
  }

  /* Main content */
  .main {
    @apply flex-1 overflow-x-hidden;
  }

  .main-inner {
    @apply p-6;
  }

  /* Header bar */
  .header-bar {
    @apply hidden bg-white border-b border-gray-200 p-4 items-center justify-between sticky top-0 z-30;
  }

  .header-title {
    @apply text-xl font-bold text-dark-grey m-0;
  }

  .header-right {
    @apply flex items-center gap-4;
  }

  /* Profile menu */
  .profile-menu {
    @apply relative;
  }

  .profile-trigger {
    @apply flex items-center gap-2 px-3 py-2 bg-transparent border border-light-grey cursor-pointer transition-all duration-200;
  }

  .profile-trigger:hover {
    @apply bg-gray-50;
  }

  .profile-avatar {
    @apply w-8 h-8 rounded-full bg-teal text-white flex items-center justify-center font-semibold text-sm;
  }

  .profile-info {
    @apply flex flex-col items-start gap-0;
  }

  .profile-name {
    @apply text-sm font-semibold text-dark-grey;
  }

  .profile-role {
    @apply text-xs text-light-grey;
  }

  .profile-dropdown {
    @apply absolute right-0 top-full mt-2 w-64 bg-white border border-gray-200 shadow-lg opacity-0 pointer-events-none transition-all duration-300 transform origin-top-right scale-95;
  }

  .profile-dropdown.active {
    @apply opacity-100 pointer-events-auto scale-100;
  }

  .profile-dropdown-header {
    @apply p-4 border-b border-gray-200;
  }

  .profile-dropdown-username {
    @apply font-semibold text-dark-grey text-sm;
  }

  .profile-dropdown-email {
    @apply text-xs text-light-grey;
  }

  .profile-dropdown-menu {
    @apply py-2;
  }

  .profile-dropdown-item {
    @apply flex items-center gap-3 px-4 py-2 text-sm text-dark-grey no-underline transition-colors duration-200;
  }

  .profile-dropdown-item:hover {
    @apply bg-gray-50;
  }

  .profile-dropdown-item .material-icons {
    @apply text-lg text-light-grey;
  }

  /* Blocks world */
  .blocks-world {
    @apply relative bg-white border border-light-grey p-6 mb-6;
    height: 240px;
  }

  .world-floor {
    @apply absolute bottom-0 left-0 right-0 h-1 bg-dark-grey;
  }

  .block {
    @apply absolute flex items-center justify-center font-bold text-white transition-all duration-500;
    width: 80px;
    height: 30px;
  }

  .claw {
    @apply absolute flex items-center justify-center transition-all duration-500;
    height: 25px;
    width: 60px;
    top: 0;
  }

  .claw-arm {
    @apply w-0.5 h-full bg-dark-grey mx-auto;
  }

  .claw-gripper {
    @apply flex justify-between w-full;
  }

  .claw-gripper-left,
  .claw-gripper-right {
    @apply w-2 h-2 bg-dark-grey;
  }

  /* Control panel */
  .control-panel {
    @apply grid gap-4 mb-6;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  }

  .control-group {
    @apply bg-white border border-light-grey p-4;
  }

  .control-group h3 {
    @apply text-sm font-semibold text-dark-grey uppercase tracking-wider mb-3 mt-0;
  }

  /* Timeline */
  .timeline {
    @apply bg-white border border-light-grey p-4 mb-6;
  }

  .timeline h2 {
    @apply text-base font-semibold text-dark-grey mb-4 mt-0;
  }

  .timeline-empty {
    @apply text-center text-light-grey py-8 text-sm;
  }

  .timeline-list {
    @apply list-none m-0 p-0 flex flex-col gap-3;
  }

  .timeline-entry {
    @apply p-3 bg-gray-50 border-l-4 transition-all duration-200;
    border-left-color: theme('colors.light-grey');
  }

  .timeline-entry.pending {
    @apply border-l-orange bg-orange/5;
  }

  .timeline-entry.active {
    @apply border-l-teal bg-teal-light/30;
  }

  .timeline-entry.completed {
    @apply border-l-green-500 bg-green-50;
  }

  .timeline-header {
    @apply flex items-center justify-between mb-2;
  }

  .timeline-title {
    @apply font-semibold text-sm text-dark-grey;
  }

  .timeline-time {
    @apply text-xs text-light-grey;
    font-variant-numeric: tabular-nums;
  }

  .timeline-moves {
    @apply list-none m-0 p-0 flex flex-col gap-1;
  }

  .timeline-move {
    @apply text-xs leading-snug pl-1 border-l-2 border-transparent;
  }

  .timeline-move.pending {
    @apply border-light-grey text-dark-grey;
  }

  .timeline-move.done {
    @apply border-teal text-dark-grey;
  }

  .timeline-move.skip {
    @apply italic text-light-grey border-light-grey;
  }

  .timeline-move.informational {
    @apply text-light-grey;
  }

  .timeline-beliefs {
    @apply mt-2 p-1.5 px-2 bg-teal-light text-xs text-dark-grey border border-dashed border-teal leading-snug;
  }

  .timeline-clock {
    @apply flex items-center justify-between mb-2 gap-2;
  }

  .timeline-clock-label {
    @apply text-xs uppercase tracking-wider text-light-grey;
  }

  .clock-display {
    @apply font-sans text-sm px-2.5 py-1 bg-dark-grey text-teal border border-gray-600 rounded-2xl min-w-16 text-center;
    font-variant-numeric: tabular-nums;
  }

  /* Stats panel */
  .stats-panel {
    @apply bg-white border border-light-grey p-4 mb-6;
  }

  .stats-panel h2 {
    @apply text-base font-semibold text-dark-grey mb-4 mt-0;
  }

  .stats-grid {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  }

  .stat-card {
    @apply p-3 bg-gray-50 border border-gray-200 text-center;
  }

  .stat-value {
    @apply text-2xl font-bold text-dark-grey mb-1;
    font-variant-numeric: tabular-nums;
  }

  .stat-label {
    @apply text-xs uppercase tracking-wider text-light-grey;
  }

  /* Toast notifications */
  .toast {
    @apply fixed bottom-6 right-6 bg-dark-grey text-white px-4 py-3 shadow-lg z-50 min-w-64 max-w-md opacity-0 translate-y-2 transition-all duration-300;
  }

  .toast.show {
    @apply opacity-100 translate-y-0;
  }

  .toast.success {
    @apply bg-green-600;
  }

  .toast.error {
    @apply bg-red-600;
  }

  .toast.info {
    @apply bg-blue-600;
  }

  /* Debug page */
  .debug-buttons {
    @apply flex flex-col gap-2 mb-4;
  }

  .debug-buttons button {
    @apply w-full;
  }

  .debug-output {
    @apply bg-gray-50 border border-light-grey p-4 font-mono text-xs overflow-auto max-h-96;
  }

  .debug-output p {
    @apply text-left m-0 mb-2;
  }

  /* Admin page */
  .admin-header {
    @apply mb-6;
  }

  .admin-header h1 {
    @apply text-left text-2xl font-bold text-dark-grey mb-2;
  }

  .admin-header p {
    @apply text-left text-light-grey;
  }

  .admin-section {
    @apply bg-white border border-light-grey p-6 mb-6;
  }

  .admin-section h2 {
    @apply text-lg font-semibold text-dark-grey mb-4 mt-0;
  }

  .users-table {
    @apply w-full border-collapse;
  }

  .users-table th {
    @apply text-left text-xs uppercase tracking-wider text-light-grey font-semibold p-2 border-b-2 border-gray-200;
  }

  .users-table td {
    @apply p-2 border-b border-gray-200 text-sm;
  }

  .users-table tr:hover {
    @apply bg-gray-50;
  }

  .role-badge {
    @apply inline-block px-2 py-1 text-xs font-semibold uppercase tracking-wide;
  }

  .role-badge.admin {
    @apply bg-orange/10 text-orange border border-orange/30;
  }

  .role-badge.user {
    @apply bg-teal/10 text-teal border border-teal/30;
  }

  .action-buttons {
    @apply flex gap-2;
  }

  .action-buttons button {
    @apply w-auto px-3 py-1 text-xs;
  }

  /* Utility classes */
  .is-hidden {
    @apply hidden;
  }

  /* Responsive adjustments */
  @media (min-width: 768px) {
    .mobile-header {
      @apply hidden;
    }

    .sidebar {
      @apply flex;
    }

    .app {
      grid-template-columns: auto 1fr;
    }

    .header-bar {
      @apply flex;
    }

    .main-inner {
      @apply pt-0;
    }
  }

  @media (max-width: 767px) {
    .main-inner {
      @apply pt-16;
    }
  }
}
